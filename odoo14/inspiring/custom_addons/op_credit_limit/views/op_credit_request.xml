<odoo>
    <data>

        <record model="ir.ui.view" id="tree_credit_request">
            <field name="name">Credit Request</field>
            <field name="model">credit.request</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="name" />
                    <field name="date_request" />
                    <field name="partner_id" />
                    <field name="user_id" />
                    <field name="employee_id" />
                    <field name="employee_no" />
                    <field name="employee_department" />
                    <field name="state" />
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="form_credit_request">
            <field name="name">Credit Request</field>
            <field name="model">credit.request</field>
            <field name="arch" type="xml">
                <form>
                    <header>

                        <!-- state draft for test only -->
                        <button name="action_request_approval" type="object" string="ارسال الطلب" class="oe_highlight" groups="op_credit_limit.group_crdit_request_user" states="" attrs="{'invisible': [('state', '!=', 'draft')]}" />

                        <button name="action_sales_m_approval" type="object" string="اعتماد مدير المبيعات" class="oe_highlight" states="request_approval" groups="op_credit_limit.group_crdit_request_sales_approval" />
                        <button name="action_accounting_m_approval" type="object" string="اعتماد المدير المالي" class="oe_highlight" states="sales_m_approval" groups="op_credit_limit.group_credit_request_accounting_approval" />

                        <button name="action_legal_affairs_approval" type="object" string="اعتماد الشئون القانونية" class="oe_highlight" states="accounting_m_approval" groups="op_credit_limit.group_credit_request_legal_approval" />
                        <button name="action_exe_m_approval" type="object" string="اعتماد المدير التنفيذي" class="oe_highlight" states="legal_affairs_approval" groups="op_credit_limit.group_credit_request_gm_approval" />
                        <!-- <button name="done" type="object" string="Done" class="oe_highlight" states="done" groups="op_credit_limit.group_credit_request_gm_approval" state='exe_m_approval' /> -->

                        <field name="state" widget="statusbar" statusbar_visible="draft,request_approval,sales_m_approval,accounting_m_approval,legal_affairs_approval,exe_m_approval,done" readonly="1" />
                       
                    </header>
                    <sheet>
                    <group>
                        <group>
                            <field name="name" />
                            <field name="date_request" />
                        </group>

                    </group>
                    <group >
                        <group  string="بيانات العميل">

                            <field name="partner_id" />
                            <field name="country_id" />
                            <field name="state_id" />
                        </group>
                        <group  string="بيانات المندوب">
                            <field name="user_id" />
                            <field name="employee_id" />
                            <field name="employee_no" />
                            <field name="employee_department" />
                            <field name="payment_term_id" options="{'no_open':True,'no_create': True}"/>
                        </group>

                    </group>
                    <notebook>
                        <page string="بيانات الائتمان المطلوب" >
                            <group>
                                <field name="credit_limit" />
                                <field name="credit_payment_method" />
                                <field name="credit_payment_method_other" />

                            </group>

                        </page>
                        <page  string="المرفقات">
                            <group>
                                <field name="credit_attachment_ids">
                                    <tree string="Attachments" editable="True">
                                        <field name="name" />
                                        <field name="attachment_id" />
                                    </tree>
                                </field>

                            </group>

                        </page>
                        <page string="استعمال مقدم الطلب" >
                            <group>
                                <group >
                                    <field name="partner_new_old" />
                                    <field name="partner_cr" />
                                    <field name="partner_vat" />
                                    <field name="partner_phone" />
                                    <field name="partner_address_1" />
                                    
                                </group>
                                <group>
                                    <field name="partner_type" />
                                    <field name="partner_official_location" />
                                    <field name="partner_official_activity" />
                                </group>

                            </group>
                            <group >
                                <field name="owner_ids">
                                    <tree string="اسم وعنوان المالك / الشركاء" editable="True">
                                        <field name="name" />
                                        <field name="desc" />
                                        <field name="phone" />
                                        <field name="address" />
                                    </tree>
                                </field>
                            </group>
                            <group>
                                <field name="bank_ids">
                                    <tree string="تفاصيل البنوك المتعامل معها" editable="True">
                                        <field name="name" />
                                        <field name="branch" />
                                        <field name="acc" />
                                    </tree>
                                </field>
                            </group>
                            <group>
                                <field name="comref_ids">
                                    <tree string="المراجع التجارية" editable="True">
                                        <field name="name" />
                                        <field name="phone" />
                                        <field name="address" />
                                    </tree>
                                </field>
                            </group>
                            <group>
                                <field name="mofawad_ids">
                                    <tree string="الاشخاص المفوضين بطلب واستلام البضاعة" editable="True">
                                        <field name="name" />
                                        <field name="job" />
                                        <field name="phone" />
                                        <!-- <field name="signature" /> -->
                                    </tree>
                                </field>
                            </group>
                            <group >
                                <field name="is_another_person_in_company" />
                            </group>
                            <group  string="ضمنات اخري">
                                <field name="other_gurantees" />
                            </group>

                        </page>
                    </notebook>
                    </sheet>
                    <div class="o_attachment_preview" />
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" />
                        <field name="activity_ids" widget="mail_activity" />
                        <field name="message_ids" widget="mail_thread" />
                    </div>

                </form>
            </field>
        </record>


        <!-- actions opening views on models -->

        <record model="ir.actions.act_window" id="action_credit_request">
            <field name="name">Credit Request</field>
            <field name="res_model">credit.request</field>
            <field name="view_mode">tree,form</field>
        </record>


        <menuitem name="Credit Request" id="menu_main_credit_request" parent="contacts.menu_contacts" action="action_credit_request" sequence="2" />




    </data>
</odoo>